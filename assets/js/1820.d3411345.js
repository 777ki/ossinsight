"use strict";(self.webpackChunkdocus=self.webpackChunkdocus||[]).push([[1820],{59943:function(e,t,r){r.d(t,{qz:function(){return T},zU:function(){return l},rj:function(){return N},If:function(){return x},De:function(){return M},wW:function(){return H},eh:function(){return z},xF:function(){return f},V1:function(){return W},NC:function(){return G},Dx:function(){return $},vb:function(){return Y},u:function(){return D}});var n=r(85893),i=r(30454),o=r(38252),a=r.n(o),s=r(67294);const c=(0,s.createContext)({setOption(){},set(){},markNoMerge(){},remove(){}});function u(e,t){e&&("function"==typeof e?e(t):e.current=t)}c.displayName="EChartsxContext";var l=(0,s.forwardRef)((function({children:e,theme:t,init:r={},defaults:o={},debug:l=!1,...d},f){const m=(0,s.useMemo)((()=>({})),[]),p=(0,s.useRef)(null),x=(0,s.useRef)(),[g,h]=(0,s.useState)(0),v=(0,s.useRef)(!0),y=(0,s.useRef)({}),b=(0,s.useRef)(!1),w=(0,s.useRef)(!1),j=(0,s.useRef)([]),S=(0,s.useCallback)(((e,t)=>{a()(m[e],t)||(m[e]=t,y.current[e]=!0,h((e=>e+1)))}),[]),A=(0,s.useCallback)((e=>{e in m&&(delete m[e],v.current=!0,y.current[e]=!0,h((e=>e+1)))}),[]),z=(0,s.useCallback)((()=>{v.current=!0}),[]);(0,s.useLayoutEffect)((()=>{const e=()=>{x.current?.resize()};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,s.useLayoutEffect)((()=>{const e=()=>{x.current&&(x.current.dispose(),x.current=void 0,u(f,void 0))};if(p.current){x.current=(0,i.S1)(p.current,t,{devicePixelRatio:"undefined"!=typeof window?window.devicePixelRatio:2,...r});return b.current=!1,e}e()}),[]),(0,s.useEffect)((()=>{const e=v.current?{...o}:{};if((v.current?Object.values(m):Object.keys(y.current).map((e=>m[e]))).forEach((t=>function(e,t){if(!t.mainType)throw new Error("option.mainType must be specified");if(e[t.mainType]){const r=e[t.mainType];if(r instanceof Array)if(1===r.length)if(r[0].id===t.id&&void 0!==t.id)r[0]=t;else{if(void 0===r[0].id||void 0===t.id)throw new Error("option.id must be set with multiple items");r.push(t)}else if(r.length>1){if(void 0===t.id)throw new Error("option.id must be set with multiple items");const e=r.findIndex((e=>e.id===t.id));e>=0?r.splice(e,1,t):r.push(t)}else r[0]=t;else if(r.id===t.id&&void 0!==t.id)e[t.mainType]=t;else{if(void 0===t.id||void 0===r.id)throw new Error("option.id must be set with multiple items");e[t.mainType]=[r,t]}}else e[t.mainType]=t}(e,t))),Object.keys(e).length){l&&console.debug("echartsx.set",e);const t=x.current;t&&(t.setOption(e,v.current),w.current=!0,j.current.length>0&&(j.current.forEach((e=>t.setOption(e))),j.current=[])),b.current||(u(f,x.current),b.current=!0)}v.current=!1,y.current={}}),[o,g]);const R=(0,s.useCallback)((e=>{const t=x.current;t&&w.current?t.setOption(e):j.current.push(e)}),[]);return(0,n.jsxs)(c.Provider,{value:{set:S,markNoMerge:z,remove:A,setOption:R},children:[(0,n.jsx)("div",{ref:p,...d}),e]})}));const d=function({dependencies:e,children:t}){return(0,s.useMemo)((()=>(0,n.jsx)(n.Fragment,{children:t})),e??[])};d.displayName="Once";var f=d;function m(e){return e?"function"==typeof e?e():e:null}const p=function({once:e=!1,cond:t,then:r,else:i}){let o;return o=m(t?r:i),e?(0,n.jsx)(f,{children:o},t?"then":"else"):(0,n.jsx)(n.Fragment,{children:o})};p.displayName="If";var x=p;let g=0;function h(){return(0,s.useMemo)((()=>":"+ ++g),[])}function v(e,{...t}={},r){const i=r=>{const{set:i,remove:o}=(0,s.useContext)(c),u=h(),l=(0,s.useRef)(void 0);return(0,s.useEffect)((()=>{l.current&&a()(l.current,r)||(i(u,{id:u,...t,...r,mainType:e}),l.current=r)}),[r]),(0,s.useEffect)((()=>()=>{l.current=void 0,o(u)}),[]),(0,n.jsx)(n.Fragment,{})};return i.displayName=r??"echarts:"+e,i}var y;!function(e){let t,r,n,i;!function(e){e.X=v("xAxis",{type:"value"},"XValueAxis"),e.Y=v("yAxis",{type:"value"},"YValueAxis"),e.Angle=v("angleAxis",{type:"value"},"AngleValueAxis"),e.Radius=v("radiusAxis",{type:"value"},"RadiusValueAxis")}(t=e.Value||(e.Value={})),function(e){e.X=v("xAxis",{type:"time"},"XTimeAxis"),e.Y=v("yAxis",{type:"time"},"YTimeAxis"),e.Angle=v("angleAxis",{type:"time"},"AngleTimeAxis"),e.Radius=v("radiusAxis",{type:"time"},"RadiusTimeAxis")}(r=e.Time||(e.Time={})),function(e){e.X=v("xAxis",{type:"log"},"XLogAxis"),e.Y=v("yAxis",{type:"log"},"YLogAxis"),e.Angle=v("angleAxis",{type:"log"},"AngleLogAxis"),e.Radius=v("radiusAxis",{type:"log"},"RadiusLogAxis")}(n=e.Log||(e.Log={})),function(e){e.X=v("xAxis",{type:"category"},"XCategoryAxis"),e.Y=v("yAxis",{type:"category"},"YCategoryAxis"),e.Angle=v("angleAxis",{type:"category"},"AngleCategoryAxis"),e.Radius=v("radiusAxis",{type:"category"},"RadiusCategoryAxis")}(i=e.Category||(e.Category={}))}(y||(y={}));var b=y,w=r(38180),j=r(68023);(0,j.D)(w.N);const S=v("series",{type:"bar"},"BarSeries");var A=r(92854);(0,j.D)(A.N);const z=v("series",{type:"line"},"LineSeries");var R=r(76010);(0,j.D)(R.N);const C=v("series",{type:"scatter"},"Scatter");var L=r(27240);(0,j.D)(L.N);const T=v("dataset",{},"Dataset");var k=r(76395);(0,j.D)(k.N);var M=v("legend",{},"Legend"),E=r(82739);(0,j.D)(E.N);var D=v("tooltip",{},"Tooltip"),O=r(31281);(0,j.D)(O.N);const N=v("grid",void 0,"Grid");var I=r(83520);(0,j.D)(I.N);const V=v("singleAxis",{},"SingleAxis");var X=r(20878);(0,j.D)(X.N);const Y=v("toolbox",{},"Toolbox");var U=r(8690);(0,j.D)(U.N);const $=v("title",{},"Title");var P=r(82811),F=r(6378),B=r(72127);(0,j.D)([P.N,F.T,B.z]);var W=(0,s.forwardRef)((function({data:e,fields:t,children:r,theme:i,...o},a){const c=(0,s.useMemo)((()=>{const r=new Set;return e.forEach((e=>{r.add(e[t.name])})),[...r]}),[e,t.name]);return(0,n.jsxs)(l,{theme:i,init:{renderer:"canvas",...o},ref:a,defaults:{animationDuration:3e3,animationDurationUpdate:3e3},children:[(0,n.jsxs)(f,{children:[(0,n.jsx)(N,{containLabel:!0,top:72,left:24,right:108}),(0,n.jsx)(b.Value.Y,{interval:1,min:1,inverse:!0,offset:16,axisPointer:{show:!0,type:"shadow",snap:!0,label:{precision:0},triggerTooltip:!1}}),(0,n.jsx)(b.Time.X,{axisLabel:{formatter:e=>String(e),showMaxLabel:!0},minInterval:1,maxInterval:1,position:"top",splitLine:{show:!0},offset:28,axisLine:{show:!1},axisTick:{show:!1},axisPointer:{show:!0,type:"line",snap:!0,label:{formatter:({value:e})=>String(e)},triggerTooltip:!1}}),(0,n.jsx)(D,{trigger:"item"})]}),(0,n.jsx)(f,{dependencies:c,children:c.map((e=>(0,n.jsxs)(s.Fragment,{children:[(0,n.jsx)(T,{id:e,fromDatasetId:"original",transform:[{type:"filter",config:{value:e,dimension:t.name}},{type:"sort",config:{dimension:t.time,order:"asc"}}]}),(0,n.jsx)(z,{name:e,datasetId:e,encode:{x:t.time,y:t.rank},smooth:!0,lineStyle:{width:3},symbolSize:8,symbol:"circle",endLabel:{show:!0,offset:[12,0],width:96,fontSize:14,overflow:"truncate",formatter:e=>{const t=e.seriesName,[r,n]=t.split("/");return r===n?n:`{owner|${r}/}\n${n}`},rich:{owner:{fontSize:12,color:"gray"}}},emphasis:{focus:"series",label:{fontSize:10}},tooltip:{formatter:"{a}"}})]},e)))}),(0,n.jsx)(T,{id:"original",source:e}),r]})}));function q(){const e=(0,s.useRef)(),[t,r]=(0,s.useState)(null),[n,i]=(0,s.useState)(!1),o=(0,s.useRef)(!1),a=(0,s.useCallback)((t=>{e.current=t??void 0,r(t),t&&(u.current=t.captureStream(24),console.log("Started stream capture from canvas element: ",u.current),o.current&&f())}),[]),c=(0,s.useRef)(),u=(0,s.useRef)(),l=(0,s.useRef)(),d=(0,s.useMemo)((()=>{if("undefined"==typeof MediaRecorder)return;const e=["video/mp4","video/webm;codecs=h264","video/webm","video/webm,codecs=vp9","video/vp8","video/webm;codecs=vp8","video/webm;codecs=daala","video/mpeg"];for(let t in e)if(MediaRecorder.isTypeSupported(e[t]))return e[t]}),[]);if(!d)throw new Error("Not support recorder");const f=(0,s.useCallback)((()=>{o.current=!0;const t=e.current,r=u.current;if(!t||c.current||!r)return;let n={mimeType:d,videoBitsPerSecond:4e7};l.current=[];let a=c.current=new MediaRecorder(u.current,n);a.onstop=e=>{console.log("Recorder stopped: ",e),i(!1)},a.onstart=()=>{i(!0)},a.ondataavailable=e=>{e.data&&e.data.size>0&&l.current.push(e.data)},a.start(5e3),console.log("MediaRecorder started",a)}),[]),m=(0,s.useCallback)((()=>{o.current=!1;e.current&&c.current&&(console.log("MediaRecorder stopped",c.current),"inactive"!==c.current?.state&&c.current?.stop())}),[]),p=(0,s.useCallback)((()=>{if(!e.current||!l.current)return;const t=new Blob(l.current,{type:d}),r=window.URL.createObjectURL(t),n=document.createElement("a");n.style.display="none",n.href=r,n.download="test."+/\w+\/(\w+)/.exec(d||"")?.[1],document.body.appendChild(n),n.click(),setTimeout((()=>{document.body.removeChild(n),window.URL.revokeObjectURL(r)}),100)}),[]);return(0,s.useLayoutEffect)((()=>{if(t)return()=>{console.log("clear canvas"),m(),e.current=void 0,c.current=void 0,u.current=void 0,l.current=void 0}}),[t]),{ref:a,download:p,start:f,stop:m,recording:n}}function Z({data:e,interval:t,fields:r,onStart:i,onStop:o,max:a}){const{setOption:u}=(0,s.useContext)(c),{sortedNames:l}=function({data:e,fields:{time:t,name:r},interval:n,onStart:i,onStop:o},a){const c=(0,s.useRef)(),u=(0,s.useRef)(0),l=(0,s.useMemo)((()=>[...e.reduce(((e,t)=>(e.add(t[r]),e)),new Set)].sort()),[e,r]),d=(0,s.useMemo)((()=>[...e.reduce(((e,r)=>(e.add(r[t]),e)),new Set)].sort()),[e,t]),f=(0,s.useMemo)((()=>e.reduce(((e,r)=>{const n=r[t];let i=e.get(n);return i||(i={time:n,data:[]},e.set(n,i)),i.data.push(r),e}),new Map)),[e]),m=(0,s.useCallback)((()=>{if(u.current>=d.length)return!1;const e=d[u.current];c.current=e;const t=f.get(e)?.data.reduce(((e,t)=>(e[t[r]]=t,e)),{});return u.current+=1,a(t||{},c.current,l),u.current<d.length}),[f,d]);return(0,s.useEffect)((()=>{u.current=0,m(),i?.();const e=setInterval((()=>{m()||(o?.(),clearInterval(e))}),n);return()=>{o?.(),clearInterval(e)}}),[e,l,d,n]),{sortedNames:l,sortedTimes:d}}({fields:r,data:e,interval:t,onStart:i,onStop:o},((e,t,n)=>{u({series:[{id:"time",type:"scatter",data:[{id:"time",value:t}]},{id:"bars",type:"bar",data:n.map((t=>e[t]?.[r.value]??0))}]})}));return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(f,{dependencies:l,children:(0,n.jsx)(b.Category.Y,{animationDurationUpdate:t,animationDuration:t,animationEasing:"exponentialIn",animationEasingUpdate:"exponentialOut",data:l,inverse:!0,max:Math.min(a,l.length)-1,axisLabel:{fontSize:14,formatter:e=>{const[t,r]=e.split("/");return t===r?r:`{owner|${t}/}\n${r}`},rich:{owner:{fontSize:12,opacity:.618}}}})})})}(0,j.D)([P.N,F.T,B.z]);var G=(0,s.forwardRef)((function({formatTime:e,fields:t,data:r,interval:i,children:o,theme:a,max:c=10,...u},d){const{ref:m,recording:p,download:g,start:h,stop:v}=function(e){const{start:t,stop:r,recording:n,download:i,ref:o}=q();return{ref:(0,s.useCallback)((t=>{o(t?.getDom().querySelector("canvas")??null),e&&("function"==typeof e?e(t):e.current=t)}),[]),start:t,stop:r,recording:n,download:i}}(d),{max:y,min:w}=(0,s.useMemo)((()=>r.reduce(((e,r)=>(r[t.time]>e.max&&(e.max=r[t.time]),r[t.time]<e.min&&(e.min=r[t.time]),e)),{max:"",min:"zzzzzzzzzzzzzzzzzzzzzzz"})),[r]),j=(0,s.useCallback)((t=>e?.(t.value)??String(t.value)),[e]);return(0,n.jsxs)(l,{theme:a,init:{renderer:"canvas",...u},defaults:{animationDuration:0,animationDurationUpdate:i,animationEasing:"linear",animationEasingUpdate:"linear"},ref:m,children:[(0,n.jsxs)(f,{dependencies:[w,y],children:[(0,n.jsx)(N,{containLabel:!1,left:96,top:48,bottom:48,right:48}),(0,n.jsx)(M,{type:"scroll",orient:"horizontal"}),(0,n.jsx)(b.Value.X,{max:"dataMax",axisLabel:{showMaxLabel:!1},position:"top"}),(0,n.jsx)(D,{trigger:"item",renderMode:"html"})]}),(0,n.jsxs)(f,{dependencies:[w,y],children:[(0,n.jsx)(V,{type:"time",min:w,max:y,bottom:"24",axisLabel:{show:!1},axisTick:{show:!1},height:"0",tooltip:{show:!1},left:80,right:80}),(0,n.jsx)($,{id:"min",text:e?.(w),textStyle:{fontSize:12,fontWeight:"bold"},left:8,bottom:12}),(0,n.jsx)($,{id:"max",text:e?.(y),textStyle:{fontSize:12,fontWeight:"bold"},right:8,bottom:12})]}),(0,n.jsxs)(f,{dependencies:[j,t.name,t.value],children:[(0,n.jsx)(C,{id:"time",coordinateSystem:"singleAxis",symbolSize:6,symbolOffset:3,symbolRotate:180,symbol:"path://M,90,0,H,0,l,45,90,L,90,0,z",label:{show:!0,position:"bottom",formatter:j},emphasis:{disabled:!0}}),(0,n.jsx)(S,{id:"bars",encode:{x:t.value,y:t.name},realtimeSort:!0,seriesLayoutBy:"column",colorBy:"data",barMaxWidth:45,label:{show:!0,position:"right",valueAnimation:!0}})]}),(0,n.jsx)(x,{cond:!p,once:!0,then:()=>{return(0,n.jsx)(Y,{feature:{myDownload:(e=g,{show:!0,onclick:e,iconStyle:{borderColor:"lightgray"},icon:"path://M995.84,1024,28.16,1024C12.8,1024,0,1011.2,0,995.84l0,0c0-15.36,12.8-28.16,28.16-28.16l967.68,0c15.36,0,28.16,12.8,28.16,28.16l0,0C1024,1011.2,1011.2,1024,995.84,1024zM926.72,376.32,926.72,376.32c-10.24-10.24-30.72-10.24-40.96,0L537.6,721.92,537.6,28.16C537.6,12.8,527.36,0,512,0s-25.6,12.8-25.6,28.16l0,693.76L138.24,376.32c-10.24-10.24-30.72-10.24-40.96,0-10.24,10.24-10.24,28.16,0,40.96l394.24,394.24c2.56,2.56,2.56,2.56,5.12,2.56,0,0,2.56,2.56,2.56,2.56,7.68,2.56,15.36,2.56,23.04,0,2.56,0,2.56-2.56,2.56-2.56,2.56,0,5.12-2.56,5.12-2.56l394.24-394.24C936.96,404.48,936.96,386.56,926.72,376.32z"})}});var e}}),(0,n.jsx)(Z,{interval:i,fields:t,data:r,onStart:h,onStop:v,max:c}),o]})}));var H=(0,s.forwardRef)((function({data:e,fields:t,children:r,theme:i,formatTime:o,...a},c){const u=function(e,t){return(0,s.useMemo)((()=>{const r=new Set;return e.forEach((e=>r.add(e[t]))),[...r].sort()}),[e,t])}(e,t.name),d=(0,s.useCallback)((e=>o?.(e.value)??String(e.value)),[o]);return(0,n.jsxs)(l,{ref:c,init:a,theme:i,children:[(0,n.jsxs)(f,{dependencies:u,children:[(0,n.jsx)(N,{containLabel:!0,left:8,right:8,top:48,bottom:8}),(0,n.jsx)(b.Time.X,{axisPointer:{label:{formatter:d}}}),(0,n.jsx)(b.Value.Y,{}),(0,n.jsx)(D,{trigger:"axis",axisPointer:{type:"cross"},renderMode:"html",confine:!0,formatter:e=>`<b>${e[0].axisValueLabel}</b><br/>`+e.sort(((e,r)=>r.value[t.value]-e.value[t.value])).map((e=>`${e.marker}${e.value[t.name]} <span style="float: right; margin-left: 16px;">${e.value[t.value]}</span>`)).join("<br>")}),u.map((e=>(0,n.jsxs)(s.Fragment,{children:[(0,n.jsx)(T,{id:e,fromDatasetId:"original",transform:{type:"filter",config:{value:e,dimension:t.name}}}),(0,n.jsx)(z,{datasetId:e,name:e,encode:{x:t.time,y:t.value},showSymbol:!1,smooth:!0,emphasis:{focus:"series"}})]},e)))]}),(0,n.jsx)(T,{id:"original",source:e}),r]})}))},91262:function(e,t,r){var n=r(67294),i=r(72389);t.Z=function(e){var t=e.children,r=e.fallback;return(0,i.Z)()&&null!=t?n.createElement(n.Fragment,null,t()):r||null}},38252:function(e){e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!=i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!=i--;){var a=o[i];if(("_owner"!==a||!t.$$typeof)&&!e(t[a],r[a]))return!1}return!0}return t!=t&&r!=r}}}]);